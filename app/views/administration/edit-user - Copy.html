<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

    <!-- Latest compiled and minified JavaScript -->

</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-8 m-auto mt-1">
            <form action="/admin/edit/user/save" method="post">
                <input name="user_id" value="{{@edit_user[0]['usr_id']}}" type="hidden">


                <select class="selectpicker" multiple data-actions-box="true">
                    <option>Mustard</option>
                    <option>Ketchup</option>
                    <option>Relish</option>
                </select>

                <div class="form-group">
                    <label for="user_name">UserName:</label>
                    <input disabled type="text" name="user_name" class="form-control" value="{{@edit_user[0]['usr_name']}}"  id="user_name">

                </div>
                <div class="form-group form-check">
                    <label for="priv_admin">
                    <input class="form-check-input"   {{@$edit_user[0]['priv_admin']=='Y'? 'checked':'' }} name="priv_admin" value="Y" type="checkbox" id="priv_admin"> Is Admin
                    </label>

                </div>
                <div class="row " {{@$edit_user[0]['priv_admin']=='Y'? "style='display:none'":'' }} id="user-privileges">
                    <div class="col-12 float-left">
                        <h5>kpis_ids Section</h5>
                        <repeat group="{{ @kpis_kpis }}" value="{{ @kpis_id_item }}">
                                <div class="col-3 float-left ">
                                        <div class="form-group form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input kpis_kpis"  {{in_array(@kpis_id_item.kpi_id,@user_kpis_ids)==1?'checked':'' }} name="kpis_kpis[]" value="{{@kpis_id_item.kpi_id}}" type="checkbox"> {{@kpis_id_item.kpi_title}}
                                            </label>
                                        </div>
                                </div>
                            </repeat>
                    </div>
                    <div class="col-12">
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="kpis_kpis_check_all" name="kpis_kpis_option_radio" value="1" type="radio"> Select All
                                </label>
                            </div>
                        </div>
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="kpis_kpis_uncheck_all" name="kpis_kpis_option_radio" value="0"  type="radio"> UnSelect All
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 float-left">
                            <h5>projections_prjs Section</h5>
                        <repeat group="{{ @projections_prjs }}" value="{{ @projections_prj_item }}">
                            <div class="col-3 float-left ">
                                    <div class="form-group form-check">
                                        <label class="form-check-label">
                                            <input class="form-check-input projections_prjs" {{in_array(@projections_prj_item.prj_id,@user_projections_ids)==1?'checked':'' }} name="projections_prjs[]" value="{{@projections_prj_item.prj_id}}" type="checkbox"> {{@projections_prj_item.prj_title}}
                                        </label>
                                    </div>
                            </div>
                        </repeat>
                        </div>
                    <div class="col-12">
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="projections_prjs_check_all" name="projections_prjs_option_radio" value="1" type="radio"> Select All
                                </label>
                            </div>
                        </div>
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="projections_prjs_uncheck_all" name="projections_prjs_option_radio" value="0"  type="radio"> UnSelect All
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 float-left">
                            <h5>reports_reps Section</h5>
                        <repeat group="{{ @reports_reps }}" value="{{ @reports_id_item }}">
                            <div class="col-3 float-left ">
                                    <div class="form-group form-check">
                                        <label class="form-check-label">
                                            <input class="form-check-input reports_ids" {{in_array(@reports_id_item.rep_id,@user_reports_ids)==1?'checked':'' }} name="reports_ids[]" value="{{@reports_id_item.rep_id}}" type="checkbox"> {{@reports_id_item.rep_title}}
                                        </label>
                                    </div>
                            </div>
                        </repeat>
                        </div>
                    <div class="col-12">
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="reports_ids_check_all" name="reports_ids_option_radio" value="1" type="radio"> Select All
                                </label>
                            </div>
                        </div>
                        <div class="col-6 float-left">
                            <div class="form-group form-check">
                                <label class="form-check-label">
                                    <input class="form-check-input" id="reports_ids_uncheck_all" name="reports_ids_option_radio" value="0"  type="radio"> UnSelect All
                                </label>
                            </div>
                        </div>
                    </div>

                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script>



    $("#priv_admin").change(function () {
        if ($(this).is(":checked")) {
            $("#user-privileges").hide();
        }
        else {
            $("#user-privileges").show();
        }
    });

    $('#kpis_kpis_check_all').change(function () {
        $('.kpis_kpis').each(function(){
            $(this).prop('checked',true);
        });

    });
    $('#kpis_kpis_uncheck_all').change(function () {
        $('.kpis_kpis').each(function(){
            $(this).prop('checked',false);
        });

    });
    $('#projections_prjs_check_all').change(function () {
        $('.projections_prjs').each(function(){
            $(this).prop('checked',true);
        });

    });
    $('#projections_prjs_uncheck_all').change(function () {
        $('.projections_prjs').each(function(){
            $(this).prop('checked',false);
        });

    });
    $('#reports_ids_check_all').change(function () {
        $('.reports_ids').each(function(){
            $(this).prop('checked',true);
        });

    });
    $('#reports_ids_uncheck_all').change(function () {
        $('.reports_ids').each(function(){
            $(this).prop('checked',false);
        });

    });



</script>
</body>
</html>
